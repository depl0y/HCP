<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>HCP by depl0y</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>HCP</h1>
        <p>An iOS application to control HomeWizard, Hue and other devices in your home.</p>

        <p class="view"><a href="https://github.com/depl0y/HCP">View the Project on GitHub <small>depl0y/HCP</small></a></p>


        <ul>
          <li><a href="https://github.com/depl0y/HCP/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/depl0y/HCP/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/depl0y/HCP">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p></p><img src="https://raw.githubusercontent.com/depl0y/HCP/develop/HCP/Images.xcassets/AppIcon.appiconset/Icon-76@2x.png"><h1>
<a name="home-control-panel" class="anchor" href="#home-control-panel"><span class="octicon octicon-link"></span></a>Home Control Panel</h1>

<p>Home Control Panel has been in development for a couple of months now, where the first try to set up this project was too complex and user-unfriendly. Because the scope of the project changed a bit (explanation below) and because I was ready for a <em>swift</em>-only project, I decided that most of the stuff could use a rewrite.</p>

<h1>
<a name="goals" class="anchor" href="#goals"><span class="octicon octicon-link"></span></a>Goals</h1>

<p>The goals of <strong>HCP</strong> is to be able to control my home from an iPad which I have laying around. For this, you of course need hardware to perform most of (well, actually: all) functions this application offers.</p>

<p>I want to be able to connect to several devices and all control them from one giant control-panel. With this functionality I want to stay as close to the feature-set as the supported hardware supports.</p>

<p>At first the idea was that only <a href="http://homewizard.nl">HomeWizard</a> devices could be controlled by this application, but as soon as I added beta testers to the first alpha release of the application, requests for more supported devices came rolling in. So HCP is now less <a href="http://homewizard.nl">HomeWizard</a> focussed and also functions when you do not have one.</p>

<h1>
<a name="ios-compatibility" class="anchor" href="#ios-compatibility"><span class="octicon octicon-link"></span></a>iOS Compatibility</h1>

<p><strong>iOS8</strong>, HomeKit integration might be useful. It is going to be an universal application, running both on the iPad with iOS8 and your iPhone as well. Currently there are no plans to display a different interface for iPhone 6 and 6+. There will be minor differences between the iPhone and iPad version.</p>

<p>The iPhone version will not prevent locking of your device, which the iPad version will do by default (should be a setting somewhere).</p>

<h1>
<a name="supported-hardware" class="anchor" href="#supported-hardware"><span class="octicon octicon-link"></span></a>Supported Hardware</h1>

<p>Currently the project focusses on 2 hardware devices, but can later be expanded by either me or other fellow developers.</p>

<h3>
<a name="homewizard" class="anchor" href="#homewizard"><span class="octicon octicon-link"></span></a>HomeWizard</h3>

<p>The <a href="http://homewizard.nl">HomeWizard</a> is a device that let's you tie all kinds of devices together. A couple of supported devices are:</p>

<ul>
<li>Smart P1 based power meters</li>
<li>Klik-aan/Klik-uit switches (quite popular in the Netherlands)</li>
<li>RF based door sensors</li>
<li>RF based thermometers</li>
<li>IP cameras</li>
</ul><h3>
<a name="philips-hue" class="anchor" href="#philips-hue"><span class="octicon octicon-link"></span></a>Philips Hue</h3>

<p>Does the <a href="http://www2.meethue.com/en-US">Philips Hue Bridge</a> need an introduction? RGB LED powered lights which can be controlled using your phone or tablet.</p>

<h1>
<a name="model-definitions" class="anchor" href="#model-definitions"><span class="octicon octicon-link"></span></a>Model definitions</h1>

<p>In the model these are defined as <code>Controller</code> objects. A <code>Controller</code> is a device that can control one or more connected devices (like lights, cameras etc.).</p>

<p>Because every controller has different discovery methods and ways to communicate with its devices, the <code>HueBridge</code> and <code>HomeWizard</code> classes are subclassed from the abstract <code>Controller</code> class.</p>

<p>The <code>Controller</code> class defines a couple of methods that each subclass of the <code>Controller</code> class should override.</p>

<p><strong>Override these methods</strong></p>

<p><code>class func discover(completion: (results: [Controller]) -&gt; Void)</code></p>

<p>The <strong>discover</strong> method should try to find local controllers of this type. Both the Hue Bridge and the HomeWizard devices support discovery of local devices. These devices should be returned in an array, while <strong>not yet</strong> stored in the CoreData database.</p>

<p><code>func start()</code></p>

<p>For both the HomeWizard and the Hue Bridge, this starts a timer which fetches data and new sensors on a regular interval.</p>

<p><code>func stop()</code></p>

<p>This should stop the timers that are running on the <code>Controller</code> object.</p>

<h1>
<a name="sensor-definitions" class="anchor" href="#sensor-definitions"><span class="octicon octicon-link"></span></a>Sensor definitions</h1>

<p>Every supported device-type has its own model defined. For example a simple <code>Switch</code> connected to the HomeWizard has a model names <code>Switch</code>. Each model has the responsibility to create a request which can be send to the <code>Controller</code> to perform the selected action.</p>

<p>A switch has 2 methods, <code>on</code> and <code>off</code> and this is an example of the <code>on</code> function.</p>

<pre><code>func on() -&gt; Void {

        // Just cast to HomeWizard, this will never make it in production code.... right?        
        (self.controller! as HomeWizard).performAction(String(format: "/sw/%d/on", self.id!), completion: { (results) -&gt; Void in
        });

}
</code></pre>

<h1>
<a name="api-documentation" class="anchor" href="#api-documentation"><span class="octicon octicon-link"></span></a>API documentation</h1>

<p>I try to document all the API calls I perform, because not everything is documented as good as I'd like. Visit the <a href="https://github.com/depl0y/HCP/wiki">Github Wiki</a> I created for this.</p>

<h1>
<a name="localisation" class="anchor" href="#localisation"><span class="octicon octicon-link"></span></a>Localisation</h1>

<p>The application will be prepared to be fully multi-lingual, but <strong>our</strong> main focus is English and Dutch. We of course will accept pull requests with translations.</p>

<h1>
<a name="colors" class="anchor" href="#colors"><span class="octicon octicon-link"></span></a>Colors</h1>

<p>The application will be have both a light and a dark mode. The light mode will show different colors, while the dark mode uses different tints of gray to differentiate different sensors. Themes will be accepted as pull requests also, as long as you are willing to support them.</p>

<h1>
<a name="also-on-my-mind" class="anchor" href="#also-on-my-mind"><span class="octicon octicon-link"></span></a>Also on my mind</h1>

<p>There are a couple of things that are on my mind, that I would love to integrate in HCP.</p>

<ul>
<li>Time based triggers.</li>
<li>Sensor based trigger.</li>
<li>XBMC controller, to control XBMC devices located in your house.</li>
<li>OSX version, control your house from your OSX status bar.</li>
</ul><p><em>These things will be build after the first release to the App Store.</em></p>

<h1>
<a name="used-frameworks-and-tools" class="anchor" href="#used-frameworks-and-tools"><span class="octicon octicon-link"></span></a>Used Frameworks and tools</h1>

<p>For this application I currently use the following frameworks (in no particular order).</p>

<ul>
<li>
<a href="http://afnetworking.com">AFNetworking</a> - An awesome networking library that I use for all HTTP requests.</li>
<li>
<a href="http://classy.as">Classy</a> - Styling of UIKit using CSS-like files.</li>
<li>
<a href="https://github.com/dzenbot/DZNSegmentedControl">DZNSegmentedControl</a> - A great control, used to page through the screens.</li>
<li>
<a href="https://github.com/magicalpanda/MagicalRecord">MagicalRecord/Shorthand</a> - CoreData in an ActiveRecord kind of way.</li>
<li>
<a href="https://github.com/rentzsch/mogenerator">Mogenerator</a> - Generate Swift files for my CoreData models.</li>
<li>
<a href="http://www.telerik.com/ios-ui">Telerik UI for iOS</a> (Commercial) - Great graph rendering and feedback system.</li>
<li>
<a href="https://github.com/kishikawakatsumi/UICKeyChainStore">UICKeyChainStore</a> - Easy KeyChain access.</li>
<li>
<a href="https://github.com/DaveWoodCom/XCGLogger">XCGLogger</a> - XCGLogger is a log framework written in Swift.</li>
</ul><h1>
<a name="thanks" class="anchor" href="#thanks"><span class="octicon octicon-link"></span></a>Thanks</h1>

<p>Thanks to the following people, making this project possible:</p>

<ul>
<li>
<a href="http://www.telerik.com/">Telerik</a> for supplying me a <a href="http://www.telerik.com/ios-ui">Telerik UI for iOS</a> license for free to incorporate in this project.</li>
<li>My wife, for her eternal patience ;)</li>
<li>My enthousiastic Alpha testers.</li>
</ul><h2></h2>

<p><a href="http://creativecommons.org/licenses/by-nc/4.0/"><img src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" alt="BY-NC Logo"></a></p>

<p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/depl0y">depl0y</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-54520744-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>